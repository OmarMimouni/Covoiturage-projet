<!-- <!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Détails du Conducteur</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .back-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateX(-5px);
        }

        .driver-info {
            padding: 30px;
        }

        .profile-section {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }

        .profile-img {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, #007bff, #0056b3);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2.5em;
            font-weight: bold;
            margin-right: 25px;
        }

        .profile-details h2 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.8em;
        }

        .rating {
            color: #ffc107;
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .info-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #007bff;
        }

        .info-card h3 {
            color: #007bff;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .info-card p {
            color: #666;
            line-height: 1.6;
        }

        .vehicle-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .vehicle-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #007bff;
            display: block;
        }

        .stat-label {
            font-size: 0.9em;
            color: #666;
        }

        .contact-btn {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .contact-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .error {
            text-align: center;
            padding: 40px;
            color: #dc3545;
            background: #f8d7da;
            margin: 20px;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <button class="back-btn" onclick="retour()">← Retour</button>
            <h1>Détails du Conducteur</h1>
            <p>Informations complètes sur le conducteur</p>
        </div>

        <div class="driver-info">
            <div id="loading" class="loading">
                <div>Chargement des informations...</div>
            </div>
            
            <div id="driverContent" style="display: none;">
                <div class="profile-section">
                    <div class="profile-img" id="profileInitials">CD</div>
                    <div class="profile-details">
                        <h2 id="driverName">Nom du Conducteur</h2>
                        <div class="rating" id="driverRating">★★★★★</div>
                        <p id="driverEmail">email@exemple.com</p>
                    </div>
                </div>

                <div class="info-grid">
                    <div class="info-card">
                        <h3>Informations Personnelles</h3>
                        <p><strong>Téléphone:</strong> <span id="driverPhone">-</span></p>
                        <p><strong>Âge:</strong> <span id="driverAge">-</span></p>
                        <p><strong>Expérience:</strong> <span id="driverExperience">-</span></p>
                    </div>
                    
                    <div class="info-card">
                        <h3>Statistiques</h3>
                        <p><strong>Trajets effectués:</strong> <span id="totalTrips">-</span></p>
                        <p><strong>Taux de ponctualité:</strong> <span id="punctuality">-</span></p>
                        <p><strong>Année d'adhésion:</strong> <span id="memberSince">-</span></p>
                    </div>
                </div>

                <div class="vehicle-section">
                    <h3>Véhicule</h3>
                    <p><strong>Modèle:</strong> <span id="vehicleModel">-</span></p>
                    <p><strong>Année:</strong> <span id="vehicleYear">-</span></p>
                    <p><strong>Couleur:</strong> <span id="vehicleColor">-</span></p>
                    <p><strong>Plaque d'immatriculation:</strong> <span id="vehiclePlate">-</span></p>
                    
                    <div class="stats">
                        <div class="stat-item">
                            <span class="stat-value" id="vehicleSeats">4</span>
                            <span class="stat-label">Places</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" id="vehicleBags">2</span>
                            <span class="stat-label">Bagages</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" id="vehicleAC">Oui</span>
                            <span class="stat-label">Climatisation</span>
                        </div>
                    </div>
                </div>

                <button class="contact-btn" onclick="contacterConducteur()">Contacter le Conducteur</button>
            </div>

            <div id="error" class="error" style="display: none;">
                Erreur lors du chargement des informations du conducteur.
            </div>
        </div>
    </div>

    <script type="module">
        import { createClient } from "https://esm.sh/@supabase/supabase-js"

        const SUPABASE_URL = "https://krxosvsxazhdahyaecin.supabase.co"
        const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtyeG9zdnN4YXpoZGFoeWFlY2luIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1ODUzNzYsImV4cCI6MjA3NzE2MTM3Nn0.jEk8UPTRAje8BNw2oapXeobG4HNglEZ5x6zzccOiG08"

        document.addEventListener('DOMContentLoaded', async () => {
            const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);
            const emailConducteur = localStorage.getItem("emailConducteur");

            if (!emailConducteur) {
                showError("Aucun conducteur sélectionné");
                return;
            }

            try {
                // Récupérer les informations du conducteur
                const { data: conducteur, error } = await supabase
                    .from('conducteurs')
                    .select('*')
                    .eq('email', emailConducteur)
                    .single();

                if (error) {
                    console.error("Erreur Supabase:", error);
                    showError("Conducteur non trouvé");
                    return;
                }

                if (conducteur) {
                    afficherDetailsConducteur(conducteur);
                } else {
                    showError("Conducteur non trouvé");
                }

            } catch (error) {
                console.error("Erreur:", error);
                showError("Erreur de chargement");
            }
        });

        function afficherDetailsConducteur(conducteur) {
            // Masquer le loading et afficher le contenu
            document.getElementById('loading').style.display = 'none';
            document.getElementById('driverContent').style.display = 'block';

            // Affichage des informations de base
            document.getElementById('profileInitials').textContent = 
                conducteur.prenom ? conducteur.prenom.charAt(0).toUpperCase() : 'C';
            document.getElementById('driverName').textContent = 
                `${conducteur.prenom || ''} ${conducteur.nom || ''}`.trim() || conducteur.email;
            document.getElementById('driverEmail').textContent = conducteur.email;

            // Informations personnelles
            document.getElementById('driverPhone').textContent = conducteur.telephone || 'Non renseigné';
            document.getElementById('driverAge').textContent = conducteur.age || 'Non renseigné';
            document.getElementById('driverExperience').textContent = conducteur.experience || 'Non renseigné';

            // Statistiques
            document.getElementById('totalTrips').textContent = conducteur.nombre_trajets || '0';
            document.getElementById('punctuality').textContent = conducteur.ponctualite || 'Non renseigné';
            document.getElementById('memberSince').textContent = conducteur.date_inscription || '2024';

            // Véhicule
            document.getElementById('vehicleModel').textContent = conducteur.modele_vehicule || 'Non renseigné';
            document.getElementById('vehicleYear').textContent = conducteur.annee_vehicule || '-';
            document.getElementById('vehicleColor').textContent = conducteur.couleur_vehicule || 'Non renseigné';
            document.getElementById('vehiclePlate').textContent = conducteur.plaque_immatriculation || 'Non renseignée';
            document.getElementById('vehicleSeats').textContent = conducteur.nombre_places || '4';
            document.getElementById('vehicleBags').textContent = conducteur.capacite_bagages || '2';
            document.getElementById('vehicleAC').textContent = conducteur.climatisation ? 'Oui' : 'Non';

            // Note
            const rating = conducteur.note || 5;
            document.getElementById('driverRating').innerHTML = '★'.repeat(Math.floor(rating)) + '☆'.repeat(5 - Math.floor(rating));
        }

        function showError(message) {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('error').style.display = 'block';
            document.getElementById('error').textContent = message;
        }

        window.retour = function() {
            window.history.back();
        }

        window.contacterConducteur = function() {
            const email = document.getElementById('driverEmail').textContent;
            const telephone = document.getElementById('driverPhone').textContent;
            
            let message = `Je souhaite contacter le conducteur:\n\n`;
            message += `Email: ${email}\n`;
            if (telephone !== 'Non renseigné') {
                message += `Téléphone: ${telephone}\n`;
            }
            
            alert(message);
            // Vous pouvez aussi ouvrir un modal de contact ici
        }
    </script>
</body>
</html> -->